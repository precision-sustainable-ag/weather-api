<div data-route="/hourly">
  <p><strong>Returns hourly gridded weather data from NLDAS-2 and MRMS datasets.</strong></p>
  <ul>
    <li>
      <strong>NLDAS-2</strong>: 0.125° × 0.125° resolution, available from 2015-01-01 to within the last 3 days (for quality-control latency).
    </li>
    <li>
      <strong>MRMS</strong>: 1 km × 1 km resolution, available from 2015-06-05 to within the last 2 hours.
    </li>
  </ul>
  <table id="Columns">
    <thead>
      <tr>
        <th>Parameter</th>
        <th>Level, Layer</th>
        <th>Database Column</th>
        <th>Shorthand</th>
        <th>Unit</th>
        <th>Data Source</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Air temperature</td>
        <td>2m above ground</td>
        <td>air_temperature</td>
        <td>TMP</td>
        <td>[C]</td>
        <td><a target="_blank" rel="noreferrer" href="https://ldas.gsfc.nasa.gov/nldas/v2/forcing">NLDAS-2</a></td>
      </tr>
      <tr>
        <td>Specific humidity</td>
        <td>2m above ground</td>
        <td>humidity</td>
        <td>SPFH</td>
        <td>[kg kg-1]</td>
        <td><a target="_blank" rel="noreferrer" href="https://ldas.gsfc.nasa.gov/nldas/v2/forcing">NLDAS-2</a></td>
      </tr>
      <tr>
        <td>Relative humidity</td>
        <td>2m above ground</td>
        <td>relative_humidity</td>
        <td></td>
        <td>fraction</td>
        <td><a target="_blank" rel="noreferrer" href="https://ldas.gsfc.nasa.gov/nldas/v2/forcing">NLDAS-2</a></td>
      </tr>
      <tr>
        <td>Atmospheric pressure</td>
        <td>Surface</td>
        <td>pressure</td>
        <td>PRES</td>
        <td>[Pa]</td>
        <td><a target="_blank" rel="noreferrer" href="https://ldas.gsfc.nasa.gov/nldas/v2/forcing">NLDAS-2</a></td>
      </tr>
      <tr>
        <td>Zonal wind speed</td>
        <td>10m above ground</td>
        <td>zonal_wind_speed</td>
        <td>UGRD</td>
        <td>[m s-1]</td>
        <td><a target="_blank" rel="noreferrer" href="https://ldas.gsfc.nasa.gov/nldas/v2/forcing">NLDAS-2</a></td>
      </tr>
      <tr>
        <td>Meridional wind speed</td>
        <td>10m above ground</td>
        <td>meridional_wind_speed</td>
        <td>VGRD</td>
        <td>[m s-1]</td>
        <td><a target="_blank" rel="noreferrer" href="https://ldas.gsfc.nasa.gov/nldas/v2/forcing">NLDAS-2</a></td>
      </tr>
      <tr>
        <td>Wind speed</td>
        <td>10m above ground</td>
        <td>wind_speed</td>
        <td></td>
        <td>[m s-1]</td>
        <td><a target="_blank" rel="noreferrer" href="https://ldas.gsfc.nasa.gov/nldas/v2/forcing">NLDAS-2</a></td>
      </tr>
      <tr>
        <td>Downward short-wave radiation flux</td>
        <td>Surface</td>
        <td>shortwave_radiation</td>
        <td>DSWRF</td>
        <td>[W m-2]</td>
        <td><a target="_blank" rel="noreferrer" href="https://ldas.gsfc.nasa.gov/nldas/v2/forcing">NLDAS-2</a></td>
      </tr>
      <tr>
        <td>Downward long-wave radiation flux</td>
        <td>Surface</td>
        <td>longwave_radiation</td>
        <td>DLWRF</td>
        <td>[W m-2]</td>
        <td><a target="_blank" rel="noreferrer" href="https://ldas.gsfc.nasa.gov/nldas/v2/forcing">NLDAS-2</a></td>
      </tr>
      <tr>
        <td>Rain fraction of total cloud water</td>
        <td>Surface</td>
        <td>convective_precipitation</td>
        <td>FRAIN</td>
        <td>proportion</td>
        <td><a target="_blank" rel="noreferrer" href="https://ldas.gsfc.nasa.gov/nldas/v2/forcing">NLDAS-2</a></td>
      </tr>
      <tr>
        <td>Convective Available Potential Energy</td>
        <td>180m above ground</td>
        <td>potential_energy</td>
        <td>CAPE</td>
        <td>[J kg-1]</td>
        <td><a target="_blank" rel="noreferrer" href="https://ldas.gsfc.nasa.gov/nldas/v2/forcing">NLDAS-2</a></td>
      </tr>
      <tr>
        <td>Potential Evaporation</td>
        <td>Surface</td>
        <td>potential_evaporation</td>
        <td>PEVAP</td>
        <td>[kg m-2]</td>
        <td><a target="_blank" rel="noreferrer" href="https://ldas.gsfc.nasa.gov/nldas/v2/forcing">NLDAS-2</a></td>
      </tr>
      <tr>
        <td rowSpan="2">Rainfall</td>
        <td rowSpan="2">Surface</td>
        <td rowSpan="2">precipitation</td>
        <td rowSpan="2">APCP</td>
        <td rowSpan="2">[mm]</td>
        <td><a target="_blank" rel="noreferrer" href="https://ldas.gsfc.nasa.gov/nldas/v2/forcing">NLDAS-2</a></td>
      </tr>
  
      <tr>
        <td><a target="_blank" rel="noreferrer" href="https://www.nssl.noaa.gov/projects/mrms/">MRMS</a></td>
      </tr>

      <tr>
        <td>Growing degree days</td>
        <td></td>
        <td>gdd</td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      </tbody>              
  </table>

  <h3>Parameters</h3>
  <ul>
    <li>
      <code>lat</code> and <code>lon</code><br>
      <em>(required if <code>location</code> is missing)</em>

      <p>Latitude and longitude in decimal degrees (<strong>WGS84</strong>).</p>

      <ul>
        <li>Latitude range: -90 to 90</li>
        <li>Longitude range: -180 to 180</li>
      </ul>

      <h4>Examples</h4>
      <ul>
        <li>
          <p><strong>Single point</strong></p>
          $ANCHOR[/hourly?lat=39&lon=-76&start=2018-11-01&end=2018-11-30&output=html]
        </li>
        <li>
          <p><strong>Multiple points</strong> (must have equal numbers of latitudes and longitudes)</p>
          $ANCHOR[/hourly?lat=39,40&lon=-76,-77&start=2018-11-01&end=2018-11-30&output=html]
        </li>
      </ul>
      <hr>
    </li>

    <li>
      <code>location</code><br>
      <em>(required if <code>lat</code> and <code>lon</code> are missing)</em>
      <p>
        A free-form location input such as an <strong>address</strong>, <strong>ZIP code</strong>, <strong>city</strong>, <strong>county</strong>, or <strong>state</strong>.
        If not an exact address, the API returns results for the centroid of the location's bounding box.
      </p>
      <p>Punctuation, capitalization, and common abbreviations are all accepted.</p>
      <h4>Examples <em style="font-weight: normal;">(each pair below returns the same result)</em></h4>
      <ul>
        <li>
          <p><strong>Empire State Building:</strong></p>
          $ANCHOR[/hourly?location=350 5th Ave, New York, NY 10118&start=2018-11-01&end=2018-11-30&output=html]
          $ANCHOR[/hourly?location=Empire State Building&start=2018-11-01&end=2018-11-30&output=html]
        </li>
        <li>
          <p><strong>Athens Georgia:</strong></p>
          $ANCHOR[/hourly?location=Athens GA&start=2018-11-01&end=2018-11-30&output=html]
          $ANCHOR[/hourly?location=athens georgia&start=2018-11-01&end=2018-11-30&output=html]
        </li>
        <li>
          <p><strong>Kansas:</strong></p>
          $ANCHOR[/hourly?location=Kansas&start=2018-11-01&end=2018-11-30&output=html]
          $ANCHOR[/hourly?location=KS&start=2018-11-01&end=2018-11-30&output=html]
        </li>
      </ul>
      <hr>
    </li>

    <li>
      <code>start</code> and <code>end</code><br>
      <em>(required)</em>
      <p>Specify the date range for the query, in <code>YYYY-MM-DD</code> format — or as <strong>relative day offsets</strong> (e.g., -15 = 15 days ago, 0 = today).</p>

      <h4>Examples</h4>
      <ul>
        <li>
          <p><strong>Specific month (Nov 2018)</strong></p>
          $ANCHOR[/hourly?lat=39&lon=-76&start=2018-11-01&end=2018-11-30&output=html]
        </li>
        <li>
          <p><strong>Previous 15 days:</strong></p>
          $ANCHOR[/hourly?lat=39&lon=-76&start=-15&end=0&output=html]
        </li>
        <li>
          <p>
            ℹ️ Note: NLDAS-2 data is typically delayed by a few days for quality control, so the most recent days may be missing.
            You can fill those gaps with <strong>predicted</strong> values:
          </p>
          $ANCHOR[/hourly?lat=39&lon=-76&start=-15&end=0&options=predicted&output=html]
          <p>You can also use <code>options=predicted</code> to retrieve <strong>forecast data for future dates</strong>:</p>
          $ANCHOR[/hourly?lat=39&lon=-76&start=30&end=60&options=predicted&output=html]
        </li>
      </ul>
      <hr>
    </li>
    
    <li>
      <code>options</code> (optional)
      <p>A comma-separated list including one or more of the following:</p>
      <ul>
        <li>
          <code>rect</code>
          <ul>
            <li>
              <p>Given two lat/lons, they will be treated as the corners of a rectangle [NE:SW or NW:SE].</p>
              $ANCHOR[/hourly?lat=39,39.5&lon=-76,-76.5&start=2018-11-01&end=2018-11-30&options=rect&output=html]
            </li>
            <li>
              <p>Given a location, its northeast and southwest will be treated as the corners of a rectangle.</p>
              $ANCHOR[/hourly?location=clarke county georgia&start=2018-11-01&end=2018-11-30&options=rect&output=html]
            </li>
          </ul>
          <p>Data within the rectangle will be retrieved based on resolution.</p>
        </li>
        <li>
          <code>graph</code><br>
          <p><strong>(!!!NOT CURRENTLY WORKING)</strong></p>
          <p>Show graphing options when <code>output=html</code>.</p>
          $ANCHOR[/hourly?location=clarke county georgia&start=2018-11-01&end=2018-11-30&options=rect,graph&output=html]
        </li>
        <li>
          <code>utc</code><br>
          <p>Output in Coordinated Universal Time instead of local time.</p>
          <ul>
            <li>
              <p>Local time:</p>
              $ANCHOR[/hourly?lat=39&lon=-76&start=2018-11-01&end=2018-11-30&output=html]
            </li>
            <li>
              <p>UTC time:</p>
              $ANCHOR[/hourly?lat=39&lon=-76&start=2018-11-01&end=2018-11-30&options=gmt&output=html]
            </li>
          </ul>
          <p>Note that this option will generally be faster than the default of local time, but you'll need to do your own conversions.</p>
        </li>
        <li>
          <code>gmt</code><br>
          <p>Synonym for utc.</p>
        </li>
        <li>
          <code>predicted</code><br>
          <p>Use real hourly data when available; otherwise, use 5-year average data.</p>
          <ul>
            <li>
              <p>Predicted:</p>
              $ANCHOR[/hourly?lat=39&lon=-76&start=-15&end=15&options=predicted&output=html]
            </li>
            <li>
              <p>Not predicted:</p>
              $ANCHOR[/hourly?lat=39&lon=-76&start=-15&end=15&output=html]
            </li>
          </ul>
        </li>
        <li>
          <code>mrms</code><br>
          <p>Output MRMS precipitation data instead of NLDAS-2.</p>
          <p>This option is ignored when using the <code>stats</code> parameter or when <code>options=rect</code>.</p>
          <p>
            ⚠️ <strong>Performance note</strong>: MRMS provides 1 km × 1 km data —
            about <strong>169 MRMS grid cells for each NLDAS-2 cell</strong>.
            Queries using MRMS can therefore be much slower and heavier on the database. Use only when the higher resolution of MRMS is required.
          </p>

          <p><strong>Examples</strong></p>
          <ul>
            <li>
              <p>NLDAS-2 precipitation:</p>
              $ANCHOR[/hourly?lat=39&lon=-76&start=2018-11-15&end=2018-11-15&output=html]
            </li>
            <li>
              <p>MRMS precipitation:</p>
              $ANCHOR[/hourly?lat=39&lon=-76&start=2018-11-15&end=2018-11-15&options=mrms&output=html]
            </li>
          </ul>
        </li>
      </ul>
      <hr>
    </li>
  
    <li>
      <code>attributes</code>
      <p>Comma-separated list of attributes to include in the output.  Defaults to:</p>
      <p style="margin-left: 2rem">date, lat, lon, air_temperature, humidity, relative_humidity, pressure, zonal_wind_speed, meridional_wind_speed, wind_speed, longwave_radiation, convective_precipitation, potential_energy, potential_evaporation, shortwave_radiation, precipitation</p>
      <h4>Notes</h4>
      <ul>
        <li><strong>date</strong> is output even if missing from the attributes list.</li>
        <li><strong>lat</strong> and <strong>lon</strong> are output for <code>options=rect</code></li>
        <li>
          You can use GRIB variable names instead of database columns,
          for example <strong>TMP</strong> for <strong>air_temperature</strong> and <strong>APCP</strong> for rainfall.
          (The output will always be database columns, however.)
        </li>
      </ul>
      
      <h4>Examples</h4>
      <ul>
        <li>
          <p>Temperature and Rain</p>
          $ANCHOR[/hourly?lat=39.032056&lon=-76.873972&start=2018-11-01&end=2018-11-30&attributes=air_temperature,precipitation&output=html]
          <br>
          $ANCHOR[/hourly?lat=39.032056&lon=-76.873972&start=2018-11-01&end=2018-11-30&attributes=TMP,APCP&output=html]
        </li>
      </ul>
    </li>
  </ul>
</div>

<div data-route="/daily">
  <p>Returns daily NLDAS2 data.</p>
  <p><strong>Examples:</strong></p>
  <ol>
    <li>
      Show November 2018 daily ranges and statistics for Beltsville MD, all parameters:
      $ANCHOR[/daily?lat=39.032056&lon=-76.873972&start=2018-11-01&end=2018-11-30&output=html]
    </li>
    <li>
      Show November 2018 daily ranges and statistics for 2400 College Station Road Athens GA, all parameters:
      $ANCHOR[/daily?location=2400 College Station Road Athens GA&start=2018-11-01&end=2018-11-30&output=html]
    </li>
    <li>
      Show November 2018 daily ranges and statistics for 2400 College Station Road Athens GA, temperature and specific humidity:
      $ANCHOR[/daily?location=2400 College Station Road Athens GA&start=2018-11-01&end=2018-11-30&attributes=air_temperature,humidity&output=html]
    </li>
    <li>
      Show November 2018 daily ranges and statistics for lat/lons [39.03, -76.87], [40.42, -80.35], [42.33, -84.26]:
      $ANCHOR[/daily?lat=39.03,40.42,42.33&lon=-76.87,-80.35,-84.26&start=2018-11-01&end=2018-11-30&attributes=lat,lon,air_temperature,humidity&output=html]
    </li>
    <li>
      Growing Degree Days:
      $ANCHOR[/daily?lat=39.032056&lon=-76.873972&start=2018-11-01&end=2018-11-30&attributes=lat,lon,gdd&gddbase=10&gddmin=10&gddmax=30&output=html]
    </li>
    <li>
      Cumulative Growing Degree Days:
      $ANCHOR[/daily?lat=39.032056&lon=-76.873972&start=2018-11-01&end=2018-11-30&gddbase=10&gddmin=10&gddmax=30&stats=sum(gdd)&output=html]
    </li>
  </ol>
</div>

<div data-route="/databasesize">
  Returns the database size as a human-readable string (e.g., '12 TB').
</div>

<div data-route="/indexes">
  Lists all indexes on non-system tables, ordered by index name.
</div>

<div data-route="/yearlyprecipitation">
  Returns the closest precipitation record to (lat, lon), along with distance to the weather station in meters.
</div>

<div data-route="/addresses">
  For all locations searched by address rather than coordinates,
  returns a list of matching addresses along with their latitude/longitude and bounding boxes.
</div>

<div data-route="/counttablesrows">
  Returns the number of tables and approximate number of rows in the database.
</div>

<div data-route="/tables">
  Returns tables in the weather schema with a positive <strong>estimated</strong> row count.
</div>

<div data-route="/mvm">
  Compares each record to its neighbor ~0.01° north or east in in MRMS data,
  returning only pairs where <code>|a.sum − b.sum|</code> &gt; <code>num</code>.
</div>

<div data-route="/frost">
  Finds the nearest frost record to the given lat/lon within 0.7° —
  only where firstfreeze, firstfrost, lastfreeze, and lastfrost are present.
</div>

<div data-route="/elevation">
  Returns the elevation (meters) for the given latitude/longitude by querying
  <a target="_blank" href="https://open-elevation.com">Open-Elevation</a>.
</div>

<div data-route="/watershed">
  <p>
    Returns watershed (HUC) attributes based on one of:
  </p>
  <ul>
    <li>a point (<code>lat,lon</code>)</li>
    <li>an address (<code>location</code>, which is geocoded to lat/lon)</li>
    <li>a state filter (<code>state</code>)</li>
    <li>a HUC prefix (<code>huc</code>)</li>
  </ul>
  <p>If no filter is provided, returns the HUC12 containing the point.</p>
  <p>
    The optional <code>attributes</code> parameter is a comma-separated list of fields to return, which may include any of the following:
    <br>
    huc12, name, huc10, huc10name, huc8, huc8name, huc6, huc6name, huc4, huc4name, huc2, huc2name, tnmid, metasourceid,
    sourcedatadesc, sourceoriginator, sourcefeatureid, loaddate, referencegnis_ids, areaacres, areasqkm, states, hutype, humod,
    tohuc, noncontributingareaacres, noncontributingareasqkm, globalid, shape_length, shape_area, polygonarray, polygon
  </p>
  
  <p>
    When <code>attributes</code> is omitted, a default set of identifiers and metadata is returned;
    setting <code>polygon=true</code> includes geometry fields in that default.
  </p>
</div>

<div data-route="/county">
  <p>Returns county metadata for the point at (<code>lat,lon</code>).</p>
  <p>
    Optionally accept <code>attributes</code> (comma-separated) to choose fields;
    using polygon in attributes expands to polygonarray (GeoJSON coordinates) and polygon (WKT).
  </p>
  <p>
    If <code>attributes</code> is omitted, returns county, state, state_code, countyfips, statefips;
    setting <code>polygon=true</code> adds the geometry fields.
  </p>
</div>

<div data-route="/mlra">
  <p>
    Returns MLRA (Major Land Resource Area) data based on either a point (<code>lat,lon</code>) or a specific MLRA symbol (<code>mlra</code>).
  </p>
  <p>
    If <code>mlra</code> is provided, returns the MLRA’s name, symbol, associated Land Resource Region (lrrsym, lrrname), and aggregated counties, states, codes, and FIPS values that intersect the MLRA;
    optionally includes geometry fields when <code>polygon=true.</code>
  </p>
  <p>
    If <code>lat/lon</code> are provided instead, returns the MLRA polygon(s) containing that point,
    with attributes defined by the attributes parameter (comma-separated list, where polygon expands to both GeoJSON polygonarray and WKT polygon).
    Defaults to returning name, mlrarsym, lrrsym, and lrrname.
  </p>
</div>

<div data-route="/rosetta">
  <p>
    Predicts van Genuchten parameters from soil characterization data (sand, silt, clay; optional bulk density, th33, th1500).
  </p>
  <p>
    Calls the API described at
    <a href="https://github.com/usda-ars-ussl/rosetta-soil">https://github.com/usda-ars-ussl/rosetta-soil</a>,
    and simply handles the CORS issue with that server.
  </p>
  <p>
    Currently used for the Water DST only.
  </p>
</div>

<div data-route="/yearly">
  <p>
    Returns yearly aggregate weather metrics for the NLDAS 0.125° grid cell containing the provided coordinates.
    Inputs are snapped to the grid (lat rounded up, lon rounded down),
    and the requested year or year range is <em>currently</em> clamped to 2018–2022.
  </p>
  <p style="color: red !important">
    TODO:  Add new yearly data once new server is set up.
  </p>
</div>